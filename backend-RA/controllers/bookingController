// controllers/bookingController.js
const Booking = require('../models/Booking');

const bookingController = {
  createBooking: async (req, res) => {
    try {
      const { user, room, checkIn, checkOut } = req.body;
      const newBooking = new Booking({
        user,
        room,
        checkIn: new Date(checkIn),
        checkOut: new Date(checkOut)
      });
      await newBooking.save();
      res.status(201).json({ message: 'Booking created successfully', booking: newBooking });
    } catch (error) {
      res.status(400).json({ message: 'Error creating booking', error: error.message });
    }
  },

  getBookings: async (req, res) => {
    try {
      const bookings = await Booking.find().populate('user').populate('room');
      res.status(200).json(bookings);
    } catch (error) {
      res.status(400).json({ message: 'Error fetching bookings', error: error.message });
    }
  }
};

module.exports = bookingController;